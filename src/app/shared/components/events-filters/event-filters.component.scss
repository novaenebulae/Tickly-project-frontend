// Importer la palette de couleurs (supposons qu'elle est définie dans un fichier _colors.scss ou _variables.scss global)
// Pour cet exemple, je vais les définir ici, mais idéalement, elles viennent d'un fichier partagé.
$primary-color: #0A2A4E; // Bleu marine foncé
$accent-color: #FF8C42;  // Orange corail vif
$secondary-color: #3A7CA5; // Bleu moyen
$light-text-color: #F8F9FA;
$dark-text-color: #212529;
$section-bg-light: #FFFFFF;
$section-bg-darker: #f0f4f8; // Un gris très clair pour les fonds de section plus sombres

:host {
  display: block;
  width: 100%;
}

.filter-bar {
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 12px 16px;
  background-color: $section-bg-light;
  border-bottom: 1px solid $section-bg-darker; // Légère séparation
  flex-wrap: wrap; // Permet le passage à la ligne sur petits écrans

  .search-field {
    flex-grow: 1; // Prend l'espace disponible
    min-width: 200px; // Empêche d'être trop petit
    ::ng-deep .mat-mdc-form-field-focus-overlay { // Pour la couleur de la bordure au focus
      background-color: transparent !important; // Angular Material peut ajouter un fond, on le retire
    }
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__leading,
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__notch,
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__trailing {
      border-color: $primary-color !important;
    }
    ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-floating-label {
      color: $primary-color !important;
    }
  }

  .advanced-filters-button {
    border-color: $primary-color;
    color: $primary-color;
    &:hover {
      background-color: rgba($primary-color, 0.05);
    }
  }

  .category-chips-container {
    .mat-mdc-chip-set {
      flex-wrap: nowrap; // Empêche le retour à la ligne des chips elles-mêmes
      overflow-x: auto; // Permet le défilement horizontal si trop de catégories
      padding-bottom: 8px; // Espace pour la scrollbar si elle apparaît
      scrollbar-width: thin; // Pour Firefox
      scrollbar-color: $secondary-color $section-bg-darker; // Pour Firefox

      &::-webkit-scrollbar {
        height: 6px;
      }
      &::-webkit-scrollbar-track {
        background: $section-bg-darker;
        border-radius: 3px;
      }
      &::-webkit-scrollbar-thumb {
        background-color: $secondary-color;
        border-radius: 3px;
      }
    }

    .mat-mdc-chip-option { // Chip inactive
      background-color: $section-bg-darker;
      color: $primary-color;
      border: 1px solid transparent; // Pour éviter le décalage au survol/sélection

      &:hover:not(.mdc-chip--selected):not(.mdc-chip--disabled) {
        background-color: darken($section-bg-darker, 5%);
      }

      &.mdc-chip--selected { // Chip active
        background-color: $accent-color;
        color: $light-text-color;
        border-color: $accent-color;
      }
    }
  }

  .sort-options {
    min-width: 180px;
    ::ng-deep .mat-mdc-form-field-focus-overlay {
      background-color: transparent !important;
    }
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__leading,
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__notch,
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__trailing {
      border-color: $primary-color !important;
    }
    ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-floating-label {
      color: $primary-color !important;
    }
  }

  .reset-all-button {
    color: $secondary-color;
  }
}

.advanced-filters-panel {
  padding: 16px;
  background-color: $section-bg-light;
  border: 1px solid $section-bg-darker;
  margin-top: -1px; // Pour se coller à la barre de filtre
  box-shadow: 0 4px 8px rgba(0,0,0,0.1); // Ombre subtile

  h4 {
    color: $dark-text-color;
    margin-top: 0;
    margin-bottom: 20px;
    font-size: 1.2em;
    border-bottom: 1px solid $section-bg-darker;
    padding-bottom: 8px;
  }

  .filter-section {
    margin-bottom: 20px;

    &.genres-section {
      .genres-label {
        display: block;
        margin-bottom: 8px;
        font-weight: 500;
        color: $dark-text-color;
      }
      .genres-checkboxes {
        display: flex;
        flex-wrap: wrap;
        gap: 10px; /* Espace vertical entre les lignes de checkboxes */

        .mat-mdc-checkbox {
          margin-right: 15px; /* Espace horizontal entre les checkboxes */
          ::ng-deep .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,
          ::ng-deep .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background {
            border-color: $accent-color !important;
            background-color: $accent-color !important;
          }
          ::ng-deep .mat-ripple-element { // Couleur du ripple
            background-color: rgba($accent-color, 0.2) !important;
          }
        }
      }
    }
  }

  .date-range-field {
    width: 100%; // Prend toute la largeur disponible dans le panneau
    ::ng-deep .mat-mdc-form-field-focus-overlay {
      background-color: transparent !important;
    }
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__leading,
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__notch,
    ::ng-deep .mdc-text-field--outlined.mdc-text-field--focused .mdc-notched-outline__trailing {
      border-color: $primary-color !important;
    }
    ::ng-deep .mat-mdc-form-field.mat-focused .mat-mdc-floating-label {
      color: $primary-color !important;
    }
    // Couleurs pour le datepicker
    ::ng-deep .mat-datepicker-content .mat-calendar-body-selected {
      background-color: $accent-color;
      color: $light-text-color;
    }
    ::ng-deep .mat-datepicker-content .mat-calendar-body-cell-content.mat-calendar-body-today {
      border-color: $secondary-color;
    }
  }

  .quick-date-options {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-top: 8px;
    button {
      border-color: $secondary-color;
      color: $secondary-color;
      &:hover {
        background-color: rgba($secondary-color, 0.05);
      }
      // Pour un bouton actif (si on garde l'état)
      // &.active {
      //   background-color: $accent-color;
      //   color: $light-text-color;
      //   border-color: $accent-color;
      // }
    }
  }

  .advanced-filters-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 24px;

    button[mat-stroked-button] {
      border-color: $primary-color;
      color: $primary-color;
      &:hover {
        background-color: rgba($primary-color, 0.05);
      }
    }
    // La couleur du bouton mat-flat-button color="accent" est gérée par le thème Material
    // mais on peut la surcharger si besoin.
  }
}

// Styles pour les form-fields en général dans ce composant (si non ciblés spécifiquement)
::ng-deep .mat-mdc-form-field {
  .mat-mdc-floating-label.mdc-floating-label {
    color: $secondary-color; // Couleur du label quand il n'est pas focus
  }
}
