@if (event) {
  <div class="event-card" (click)="viewEventDetails(event.id)" matRipple [matRippleCentered]="true">
    <div class="event-card__image-container">
      <img [src]="
      event.mainPhotoUrl ||
      'https://picsum.photos/seed/' + event.id + '/400/300'"
           [alt]="'Image pour ' + event.name"
           class="event-card__image">
      @if (formattedStartDateDay && formattedStartDateMonth) {
        <div class="event-card__date-badge">
          <span class="day">{{ formattedStartDateDay }}</span>
          <span class="month">{{ formattedStartDateMonth }}</span>
        </div>
      }
      @if (event.isFeaturedEvent) {
        <div class="event-card__featured-badge">
          <mat-icon>star</mat-icon>
          <span>À la une</span>
        </div>
      }
    </div>

    <div class="event-card__content">
      <div class="event-card__header">
        @if (event.category) {
          <span class="event-card__category-tag">{{ event.category }}</span>
        }
        <h3 class="event-card__title">{{ event.name }}</h3>
      </div>

      @if (displayLocation) {
        <div class="event-card__location">
          <mat-icon class="event-card__location-icon">location_on</mat-icon>
          <span>{{ displayLocation }}</span>
        </div>
      }


      @if (event.shortDescription) {
        <p
          class="event-card__description">{{ event.shortDescription | slice:0:100 }}{{ event.shortDescription && event.shortDescription.length > 100 ? '...' : '' }}</p>
      }
    </div>

    <div class="event-card__footer">
      <button mat-stroked-button color="primary" class="event-card__action-button">
        Voir l'événement
      </button>
      @if (!event.isFreeEvent && event.locations.length > 0 && event.locations[0].active && event.locations[0].ticketPrice != null) {
        <span class="event-card__price">
          À partir de {{ event.locations[0].ticketPrice | currency:'EUR':'symbol':'1.2-2' }}
        </span>
      } @else if (event.isFreeEvent) {
        <span class="event-card__price event-card__price--free">Gratuit</span>
      }
    </div>
  </div>
} @else {
  <div class="event-card event-card--placeholder">
    <p>Chargement de l'événement...</p>
    <!-- Ou un squelette de chargement (skeleton loader) -->
  </div>
}
