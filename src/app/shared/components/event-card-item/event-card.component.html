<div class="event-card" matRipple>
  <!-- Image de l'événement avec badge de date superposé -->
  <div class="event-card__image-container">
    <img [src]="event.mainPhotoUrl || 'https://picsum.photos/seed/' + event.id + '/300/200'"
         [alt]="'Image pour ' + event.name"
         class="event-card__image">

    <!-- Badge de date en superposition -->
    <div class="event-card__date-badge">
      <div class="event-card__date-day">{{ formattedStartDateDay }}</div>
      <div class="event-card__date-month">{{ formattedStartDateMonth }}</div>
    </div>

    @if (event.isFeaturedEvent) {
      <div class="event-card__featured-badge">
        <mat-icon>star</mat-icon>
      </div>
    }
  </div>

  <!-- Détails de l'événement -->
  <div class="event-card__content">
    <div class="event-card__category">{{ event.category.name }}</div>
    <h3 class="event-card__title">{{ event.name }}</h3>

    <div class="event-card__location">
      <mat-icon class="event-card__icon">location_on</mat-icon>
      <span>{{ displayLocation }}</span>
    </div>

    @if (event.shortDescription) {
      <p class="event-card__description">
        {{ event.shortDescription | slice:0:80 }}{{ event.shortDescription.length > 80 ? '...' : '' }}
      </p>
    }
    <!-- Prix ou statut gratuit -->
    <div class="event-card__price-container">
      @if (event.isFreeEvent) {
        <span class="event-card__free-tag">GRATUIT</span>
      } @else {
        <!-- Toujours afficher un prix si c'est payant (même si 0 ou non défini) -->
        <span
          [ngClass]="{'event-card__price': getMinTicketPrice() > 0, 'event-card__price-na': getMinTicketPrice() <= 0}">
          {{ getMinTicketPrice() > 0 ? (getMinTicketPrice() | currency:'EUR':'symbol':'1.2-2':'fr') : 'Prix à venir' }}
        </span>
      }
    </div>
  </div>

  <!-- Boutons d'action et prix -->
  <div class="event-card__footer">
    <div class="event-card__buttons">
      <button mat-flat-button color="primary" class="event-card__button-discover" (click)="viewEventDetails(event.id)">
        <span>Découvrir</span>
        <mat-icon>arrow_forward</mat-icon>
      </button>
      <button mat-flat-button color="accent" class="event-card__button-reserve" (click)="bookEvent(event.id)">
        <span>Réserver</span>
        <mat-icon>event_seat</mat-icon>
      </button>
    </div>

  </div>
</div>
