// Fichier: edit-structure-info.component.scss
@use '@angular/material' as mat;

// Couleur par défaut pour les icônes préfixes
$icon-prefix-color: var(--mat-secondary-text-color);

:host {
  display: block;
}

// Indicateur de chargement global
.loading-overlay {
  position: fixed; // Ou absolute si contenu dans un parent relatif
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(255, 255, 255, 0.7); // Fond blanc semi-transparent
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100; // Au-dessus de tout
}

// Style commun pour les cartes de section
.form-section-card {
  overflow: hidden;
  border: 1px solid var(--mat-divider-color, rgba(0, 0, 0, 0.08));
}

// Style pour l'en-tête des cartes
.section-header {
  padding: 12px 16px;
  border-bottom: 1px solid var(--mat-divider-color);

  // Style de l'avatar contenant l'icône
  .header-avatar { // Renommé de .mat-mdc-card-avatar pour clarté
    background-color: rgba(var(--palette-respective-rgb), 0.15);
    color: currentColor; // Prend la couleur définie par bg-*-subtle
    border-radius: 50%;
    // Taille augmentée pour l'avatar
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 16px;

    // Taille augmentée pour l'icône
    .header-icon {
      font-size: 30px; // Augmenté
      width: 30px; // Augmenté
      height: 30px; // Augmenté
    }
  }

  .mat-mdc-card-header-text {
    margin: 0;
  }
}


// Contenu de la carte (padding géré par p-4 dans HTML)
.mat-mdc-card-content {
  // Espacement vertical entre les champs de formulaire (confirmé)
  mat-form-field {
    &:not(:last-child) { // Applique une marge en bas sauf au dernier
      margin-bottom: 1rem; // Standard 1rem (16px)
    }
  }

  // Assurer qu'un textarea dans un h-100 s'étire
  mat-form-field.h-100 {
    display: flex;
    flex-direction: column;
    height: 100%;

    .mat-mdc-form-field-flex {
      height: 100%;
    }

    .mat-mdc-form-field-infix {
      height: 100%;

      textarea {
        height: 100%; // Pour que le textarea remplisse l'espace
        resize: none; // Empêche le redimensionnement manuel
      }
    }
  }

  p:last-child {
    margin-bottom: 0;
  }
}

// Section d'upload d'image
.image-upload-section {
  .logo-preview, .cover-preview {
    background-color: var(--mat-form-field-container-color, #eeeeee);
    border: 1px dashed var(--mat-divider-color);
    border-radius: 4px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--mat-icon-color, rgba(0, 0, 0, 0.54));
    margin-bottom: 0.5rem; // Espace sous l'aperçu avant les boutons/texte
    height: 200px;

    img {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    mat-icon {
      font-size: 48px;
      width: 48px;
      height: 48px;
    }
  }

  .logo-preview {
    // MODIFICATION: Appliquer les mêmes styles que .cover-preview
    aspect-ratio: 1 / 1; // Ratio large (identique à la couverture)
    max-height: 200px; // Hauteur maximale (identique à la couverture)
    margin: auto;
    // border-radius: 50%; // Supprimé ou commenté si on ne veut plus un logo rond
    // Les styles margin-left/right: auto ne sont plus nécessaires avec width: 100%
  }

  .cover-preview {
    width: 100%;
    align-self: stretch;
    aspect-ratio: 21 / 9; // Ratio large
    margin: auto;

    max-height: 200px;
  }

  // Positionnement du bouton supprimer
  .delete-image-btn {
    margin-left: auto; // Pousse le bouton à droite dans un conteneur flex
  }

  // Style du texte affichant le nom du fichier ou statut
  .text-muted.small {
    display: block; // Pour que text-truncate fonctionne
    line-height: 1.3;
  }

  button[mat-icon-button] {
    margin-left: 4px;
  }
}

// Style pour les icônes préfixes
.mat-mdc-form-field .mat-icon.mat-mdc-icon-prefix,
.mat-mdc-form-field .social-icon-prefix .mat-icon {
  color: $icon-prefix-color;
  margin-right: 8px;
}

// Style pour la barre d'actions fixe en bas
.action-bar {
  position: sticky;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 10;
  padding: 0.75rem 0; // Padding vertical
  background-color: var(--mat-primary-bg);

  @include mat.button-overrides((
    filled-label-text-size: 25px,
    filled-container-height: 40px,
    outlined-label-text-size: 25px,
    outlined-container-height: 40px

  ));

  .mat-icon {
    font-size: 25px;
    overflow: visible;
  }

  // MODIFICATION: Appliquer une hauteur minimale cohérente à TOUS les boutons directs
  // et s'assurer que leur contenu est centré verticalement.
  > button { // Cible les boutons enfants directs (stroked et fab)
    min-height: 40px; // Hauteur minimale cohérente
    // Ou utiliser 'height: 40px;' pour une hauteur fixe stricte
    display: flex !important; // Important pour s'assurer que flexbox est appliqué
    align-items: center; // Centre verticalement le contenu interne (texte/icône)
    justify-content: center; // Optionnel: Centre horizontalement si nécessaire
    vertical-align: middle; // Aide à l'alignement si les boutons ne sont pas seuls sur la ligne
  }

  // Les styles spécifiques au spinner FAB sont conservés et ajustés si besoin
  button[mat-flat-button] {

    mat-progress-spinner.fab-spinner {
      // Le diamètre est défini dans le HTML, ici on ajuste la position
      display: inline-block;
      vertical-align: middle; // Aide à l'alignement
      margin: 0 8px 0 -4px; // Ajustement marges pour spinner dans FAB extended
    }

    :host ::ng-deep & .mdc-button__label { // Le '&' référence le parent (button[mat-flat-button])
      display: flex;        // Nécessaire pour utiliser align-items/justify-content
      align-items: center;  // Centre verticalement le texte dans le label
      justify-content: center; // **Centre horizontalement le texte dans le label**
      width: 100%;          // Assure que le label prend toute la largeur disponible DANS le bouton
      height: auto;
    }

  }
}


// Classes de fond subtil (similaires à structure-panel)
// Assurez-vous d'avoir défini --palette-primary-rgb etc., ou utilisez des couleurs fixes
.bg-primary-subtle {
  background-color: rgba(var(--palette-primary-rgb, 63, 81, 181), 0.08);
  color: var(--mat-primary-color);
}

.bg-accent-subtle {
  background-color: rgba(var(--palette-accent-rgb, 255, 64, 129), 0.08);
  color: var(--mat-accent-color);
}

.bg-warn-subtle {
  background-color: rgba(var(--palette-warn-rgb, 244, 67, 54), 0.08);
  color: var(--mat-warn-color);
}

.bg-secondary-subtle {
  background-color: rgba(0, 0, 0, 0.04);
  color: var(--mat-secondary-text-color);
}


// Style pour les icônes préfixes (téléphone, email, réseaux sociaux)
.mat-mdc-form-field .mat-icon.mat-mdc-icon-prefix,
.mat-mdc-form-field .social-icon-prefix .mat-icon {
  color: $icon-prefix-color; // Utilise la variable définie en haut
  margin-right: 8px; // Espace après l'icône
}

// Style spécifique pour les icônes SVG des réseaux sociaux
.social-icon-prefix {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 4px;
  margin-left: 8px;
  width: 20px; // Ajustez la taille si nécessaire
  height: 20px;
  color: $icon-prefix-color;

  .social-icon {
    // Taille de l'icône SVG
    width: 20px;
    height: 20px;
  }
}

// Classe utilitaire pour les icônes grisées (inchangé)
.icon-muted {
  color: var(--mat-secondary-text-color);
}

