// Fichier: edit-structure-info.component.scss
@use '@angular/material' as mat;

// Couleur par défaut pour les icônes préfixes
$icon-prefix-color: var(--mat-secondary-text-color);

:host {
  display: block;
}

.edit-structure-page {
  // Optionnel: Texture SVG subtile en fond
  // background-image: url('/assets/patterns/subtle-pattern.svg');
  // background-repeat: repeat;
  // background-size: auto;
  padding-bottom: 100px; // Espace pour la barre d'actions fixe
}

// Indicateur de chargement global
.loading-overlay {
  position: fixed; // Ou absolute si contenu dans un parent relatif
  top: 0; left: 0; right: 0; bottom: 0;
  background-color: rgba(255, 255, 255, 0.7); // Fond blanc semi-transparent
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 100; // Au-dessus de tout
}

// Style commun pour les cartes de section
.form-section-card {
  overflow: hidden;
  border: 1px solid var(--mat-divider-color, rgba(0,0,0,0.08));
}

// Style pour l'en-tête des cartes
.section-header {
  padding: 12px 16px;
  border-bottom: 1px solid var(--mat-divider-color);

  // Style de l'avatar contenant l'icône
  .header-avatar { // Renommé de .mat-mdc-card-avatar pour clarté
    background-color: rgba(var(--palette-respective-rgb), 0.15);
    color: currentColor; // Prend la couleur définie par bg-*-subtle
    border-radius: 50%;
    // Taille augmentée pour l'avatar
    width: 48px;
    height: 48px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-right: 16px;

    // Taille augmentée pour l'icône
    .header-icon {
      font-size: 30px; // Augmenté
      width: 30px;     // Augmenté
      height: 30px;    // Augmenté
    }
  }
  .mat-mdc-card-header-text { margin: 0; }
}


// Contenu de la carte (padding géré par p-4 dans HTML)
.mat-mdc-card-content {
  // Espacement vertical entre les champs de formulaire (confirmé)
  mat-form-field {
    &:not(:last-child) { // Applique une marge en bas sauf au dernier
      margin-bottom: 1rem; // Standard 1rem (16px)
    }
  }
  // Assurer qu'un textarea dans un h-100 s'étire
  mat-form-field.h-100 {
    display: flex;
    flex-direction: column;
    height: 100%;
    .mat-mdc-form-field-flex {
      height: 100%;
    }
    .mat-mdc-form-field-infix {
      height: 100%;
      textarea {
        height: 100%; // Pour que le textarea remplisse l'espace
        resize: none; // Empêche le redimensionnement manuel
      }
    }
  }

  p:last-child { margin-bottom: 0; }
}

// Section d'upload d'image
.image-upload-section {
  .logo-preview, .cover-preview {
    background-color: var(--mat-form-field-container-color, #eeeeee);
    border: 1px dashed var(--mat-divider-color);
    border-radius: 4px;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--mat-icon-color, rgba(0,0,0,0.54));
    margin-bottom: 0.5rem; // Espace sous l'aperçu avant les boutons/texte

    img { display: block; width: 100%; height: 100%; object-fit: cover; }
    mat-icon { font-size: 48px; width: 48px; height: 48px; }
  }

  .logo-preview {
    // Taille du logo (carré par défaut)
    width: 120px;
    height: 120px;
    margin-left: auto; // Centrer horizontalement si seul
    margin-right: auto;
    // border-radius: 50%; // Pour logo rond
  }

  .cover-preview {
    width: 100%;
    aspect-ratio: 21 / 9; // Ratio large
    max-height: 200px;
  }

  // Positionnement du bouton supprimer
  .delete-image-btn {
    margin-left: auto; // Pousse le bouton à droite dans un conteneur flex
  }

  // Style du texte affichant le nom du fichier ou statut
  .text-muted.small {
    display: block; // Pour que text-truncate fonctionne
    line-height: 1.3;
  }

  button[mat-icon-button] {
    margin-left: 4px;
  }
}

// Style pour les icônes préfixes
.mat-mdc-form-field .mat-icon.mat-mdc-icon-prefix,
.mat-mdc-form-field .social-icon-prefix .mat-icon {
  color: $icon-prefix-color;
  margin-right: 8px;
}

// Style pour la barre d'actions fixe en bas
.action-bar {
  position: sticky; bottom: 0; left: 0; right: 0; z-index: 10;
  background-color: var(--mat-app-background-color);
  padding: 0.75rem 0; // Padding vertical réduit légèrement
  border-top: 1px solid var(--mat-divider-color);
  box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.08);

  // Le conteneur flex dans la colonne a align-items-center
  // Assurons-nous que le FAB s'aligne bien
  button[mat-fab] {
    // align-self: center; // Normalement géré par align-items-center du parent
    // Si le spinner cause un décalage, on cible son conteneur
    .mdc-fab__icon, .fab-spinner { // Cible l'icône ou le spinner
      vertical-align: middle; // Essayer d'aligner verticalement
    }
  }
  // Hauteur minimale pour le bouton stroked
  button[mat-stroked-button] {
    min-height: 40px; // Assure une bonne taille cliquable
    // align-self: center; // Devrait être centré par le parent flex
  }
}

// Style pour le spinner dans le bouton FAB
button[mat-fab] {
  mat-progress-spinner.fab-spinner {
    // Le diamètre est défini dans le HTML, ici on ajuste la position
    display: inline-block;
    vertical-align: middle; // Aide à l'alignement avec le texte/icône
    margin: 0 8px 0 -4px; // Ajustement marges pour spinner dans FAB extended
  }
  .mdc-fab__label { // Conteneur texte/icône interne
    display: inline-flex;
    align-items: center;
  }
}



// Classes de fond subtil (similaires à structure-panel)
// Assurez-vous d'avoir défini --palette-primary-rgb etc., ou utilisez des couleurs fixes
.bg-primary-subtle {
  background-color: rgba(var(--palette-primary-rgb, 63, 81, 181), 0.08);
  color: var(--mat-primary-color);
}
.bg-accent-subtle {
  background-color: rgba(var(--palette-accent-rgb, 255, 64, 129), 0.08);
  color: var(--mat-accent-color);
}
.bg-warn-subtle {
  background-color: rgba(var(--palette-warn-rgb, 244, 67, 54), 0.08);
  color: var(--mat-warn-color);
}
.bg-secondary-subtle {
  background-color: rgba(0, 0, 0, 0.04);
  color: var(--mat-secondary-text-color);
}


// Style pour les icônes préfixes (téléphone, email, réseaux sociaux)
.mat-mdc-form-field .mat-icon.mat-mdc-icon-prefix,
.mat-mdc-form-field .social-icon-prefix .mat-icon {
  color: $icon-prefix-color; // Utilise la variable définie en haut
  margin-right: 8px; // Espace après l'icône
}

// Style spécifique pour les icônes SVG des réseaux sociaux
.social-icon-prefix {
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 4px;
  margin-left: 8px;
  width: 20px; // Ajustez la taille si nécessaire
  height: 20px;
  color: $icon-prefix-color;

  .social-icon {
    // Taille de l'icône SVG
    width: 20px;
    height: 20px;
  }
}

// Classe utilitaire pour les icônes grisées (inchangé)
.icon-muted {
  color: var(--mat-secondary-text-color);
}



