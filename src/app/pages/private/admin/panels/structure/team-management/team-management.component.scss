// Fichier: team-management.component.scss

// Palette de couleurs décoratives pour les avatars
$avatar-colors: (#673AB7, #3F51B5, #009688, #FF5722, #795548, #E91E63, #03A9F4);

:host {
  display: block; // Assure que le composant prend de la place
}

// Classe principale du composant
.team-management-page {
  // Animation pour le formulaire d'invitation
  .invitation-card.slide-down {
    animation: slideDown 0.3s ease-out forwards;
    overflow: hidden; // Empêche le contenu de déborder pendant l'animation
  }

  // Keyframes pour l'animation
  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-20px); max-height: 0; }
    to { opacity: 1; transform: translateY(0); max-height: 300px; } // Hauteur max approx. du formulaire
  }
}

// Style pour la card d'invitation
.invitation-card {
  mat-card-header {
    // Utiliser la variable CSS du thème pour la couleur de la bordure
    border-bottom: 1px solid var(--mat-divider-color);
  }
  // Assurer que le bouton Envoyer a une hauteur correcte sur petit écran
  @media (max-width: 767.98px) {
    button[mat-raised-button] {
      min-height: 48px; // Hauteur minimale pour accessibilité/clic
    }
  }
}

// Style pour la card de la liste des membres
.team-list-card {
  // Le style du filtre est défini plus bas via .filter-field
}

// Style pour le tableau des membres
.team-table {
  // Style des en-têtes de colonne
  th.mat-mdc-header-cell {
    font-weight: 500; // Police plus grasse
    background-color: var(--mat-table-header-background-color, rgba(0, 0, 0, 0.02)); // Fond léger
    border-bottom: 1px solid var(--mat-divider-color); // Bordure thème
  }

  // Style des cellules de données
  td.mat-mdc-cell {
    border-bottom: 1px solid var(--mat-divider-color); // Bordure thème
    vertical-align: middle; // Alignement vertical

    // Style pour rendre la cellule du nom cliquable
    &.clickable-cell {
      cursor: pointer;
      // Effet visuel au survol du nom
      &:hover .fw-medium {
        text-decoration: underline;
        color: var(--mat-primary-color); // Utilise la couleur primaire du thème
      }
    }
  }

  // Style de la ligne au survol
  .team-row:hover {
    background-color: var(--mat-row-hover-background-color, rgba(0, 0, 0, 0.04)); // Couleur de survol thème ou fallback
  }

  // Supprimer la bordure pour la dernière ligne et la ligne "pas de données"
  tr.team-row:last-child td.mat-mdc-cell,
  tr.mat-mdc-no-data-row td.mat-mdc-cell {
    border-bottom: none;
  }

  // Style de l'avatar
  .team-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--mat-avatar-text-color, white); // Couleur texte thème ou fallback blanc
    font-weight: 500;
    font-size: 1rem;
    flex-shrink: 0; // Empêche de rétrécir
    text-transform: uppercase; // Initiales en majuscules
  }

  // Style de la cellule du rôle (simple affichage via chip)
  .role-cell {
    .mat-mdc-chip-set {
      justify-content: center; // Centre la puce dans la cellule
    }
    // Le style des couleurs de chip est géré via [color] dans le HTML
  }

  // Styles pour l'icône de statut
  .status-icon {
    vertical-align: middle;
    font-size: 1.25rem; // Taille de l'icône
    // Couleurs sémantiques (utiliser des variables CSS globales si définies)
    &.text-success { color: var(--app-success-color, #198754); } // Vert
    &.text-warning { color: var(--app-warning-color, #ffc107); } // Jaune/Orange
    &.text-muted { color: var(--mat-secondary-text-color); }    // Gris thème
  }

  // Style de la cellule des actions
  .actions-cell {
    min-width: 80px;      // Espace minimum pour 2 boutons
    white-space: nowrap;  // Empêche les boutons de passer à la ligne
    text-align: end;      // Assure l'alignement à droite même si flexbox est utilisé en mode mobile

    // Ajustement de l'espacement des boutons icônes
    button[mat-icon-button] {
      margin-left: 4px;
      &:first-of-type {
        margin-left: 0;
      }
    }
  }

  // --- Styles Responsives pour transformer le tableau en "cartes" ---
  @media (max-width: 768px) {
    thead { display: none; } // Masque l'en-tête

    tr.team-row {
      display: block;
      margin-bottom: 1rem;
      border: 1px solid var(--mat-divider-color); // Bordure pour la carte
      border-radius: 4px;
      padding: 0.75rem;
      &:hover { background-color: transparent; } // Pas de survol sur la carte
    }

    td.mat-mdc-cell {
      display: flex;
      justify-content: space-between; // Label à gauche, valeur à droite
      align-items: center;
      border-bottom: 1px dashed var(--mat-card-internal-divider-color, rgba(0,0,0, 0.08)); // Séparateur interne
      padding: 0.7rem 0.2rem; // Padding vertical/horizontal
      text-align: right; // Aligne la valeur à droite

      // Pseudo-élément pour afficher le label de colonne
      &::before {
        content: attr(data-label); // Contenu du data-label HTML
        font-weight: 500;
        text-align: left;
        padding-right: 1rem;
        color: var(--mat-secondary-text-color); // Couleur label
        flex-shrink: 0; // Empêche le label de passer à la ligne
      }

      // Pas de bordure pour le dernier champ de la carte
      &:last-child { border-bottom: none; }

      // Styles spécifiques pour certaines cellules en mode carte
      &[data-label="Membre:"]::before { display: none; } // Pas de label "Membre:"
      &[data-label="Membre:"] { justify-content: flex-start; } // Aligner avatar/nom à gauche

      &[data-label="Rôle:"], &[data-label="Statut:"] { justify-content: center; } // Centrer puce/icône
      &[data-label="Rôle:"]::before, &[data-label="Statut:"]::before { flex-grow: 1; text-align: left;} // Le label prend l'espace dispo

      &[data-label="Actions:"] { justify-content: flex-end; padding-top: 0.8rem; } // Aligner boutons à droite
      &[data-label="Actions:"]::before { display: none; } // Pas de label "Actions:"

      // Style pour statut avec bouton renvoi sur mobile
      &[data-label="Statut:"] {
        .status-icon + button[mat-icon-button] { margin-left: 8px; } // Espace entre icône et bouton
      }
    }
  }
}

// Style pour le champ de filtre
.filter-field {
  .mat-mdc-form-field-icon-prefix > .mat-icon,
  .mat-mdc-form-field-icon-suffix > .mat-icon-button .mat-icon {
    color: var(--mat-icon-color, var(--mat-secondary-text-color)); // Couleur icône thème
    padding-bottom: 0.1em; // Ajustement vertical
  }
  .mat-mdc-form-field-icon-suffix > .mat-icon-button {
    margin-right: -8px; // Compense padding interne pour le bouton 'close'
  }
}

// Classes utilitaires
.icon-muted {
  color: var(--mat-secondary-text-color); // Variable thème pour icône/texte secondaire
}
.bg-light-subtle {
  // Variable thème pour fond léger ou fallback
  background-color: var(--mat-app-background-hover-color, rgba(0, 0, 0, 0.02));
}
