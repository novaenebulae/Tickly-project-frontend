<div class="structure-panel-container">

  <!-- üé® En-t√™te avec informations principales -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <div class="structure-avatar">
          @if (userStructureData?.logoUrl) {
            <img [src]="userStructureData!.logoUrl" [alt]="userStructureData!.name" class="structure-logo">
          } @else {
            <div class="structure-icon-placeholder">
              <mat-icon>business</mat-icon>
            </div>
          }
        </div>
        <div class="header-titles">
          <h1>Structure</h1>
          <div class="structure-name-row">
            <p class="structure-name">{{ userStructureData?.name || 'Ma Structure' }}</p>
            <mat-chip
              [color]="statusConfig().color"
              class="status-chip">
              <mat-icon matChipAvatar>{{ statusConfig().icon }}</mat-icon>
              {{ statusConfig().label }}
            </mat-chip>
          </div>
        </div>
      </div>
      <div class="header-actions">
        <button mat-icon-button (click)="refreshData()" matTooltip="Actualiser les donn√©es" class="refresh-btn">
          <mat-icon>refresh</mat-icon>
        </button>
        <button
          mat-stroked-button
          color="primary"
          (click)="openPublicPage()"
          matTooltip="Voir la page publique">
          <mat-icon>visibility</mat-icon>
          Page publique
        </button>
      </div>
    </div>
    <div class="header-description">
      <p>G√©rez les informations de votre structure, configurez les espaces et invitez des membres √† votre √©quipe.</p>
    </div>
  </div>

  <!-- üõ†Ô∏è Actions principales -->
  <section class="actions-section">
    <div class="actions-grid">

      <!-- Action: Informations -->
      <mat-card class="action-card info-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar info-avatar">
            <mat-icon>edit</mat-icon>
          </div>
          <mat-card-title>Informations</mat-card-title>
          <mat-card-subtitle>Modifier les d√©tails de votre structure</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            Mettez √† jour le nom, l'adresse, les contacts et les informations g√©n√©rales de votre structure.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="primary"
            (click)="navigateToEdit()">
            <mat-icon>edit</mat-icon>
            Modifier
          </button>
        </mat-card-actions>
      </mat-card>

      <!-- Action: Gestion √©quipe -->
      <mat-card class="action-card team-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar team-avatar">
            <mat-icon>group</mat-icon>
          </div>
          <mat-card-title>√âquipe</mat-card-title>
          <mat-card-subtitle>G√©rer les membres et leurs r√¥les</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            Invitez de nouveaux membres, assignez des r√¥les et g√©rez les permissions d'acc√®s.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="primary"
            (click)="navigateToTeam()">
            <mat-icon>settings</mat-icon>
            G√©rer l'√©quipe
          </button>
        </mat-card-actions>
      </mat-card>

      <!-- Action: Zones et espaces -->
      <mat-card class="action-card areas-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar areas-avatar">
            <mat-icon>map</mat-icon>
          </div>
          <mat-card-title>Zones & Espaces</mat-card-title>
          <mat-card-subtitle>Configurer les espaces physiques</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            D√©finissez les diff√©rentes zones de votre structure : sc√®nes, bars, gradins, etc.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="accent"
            (click)="navigateToAreas()">
            <mat-icon>settings</mat-icon>
            Configurer les zones
          </button>
        </mat-card-actions>
      </mat-card>

      <!-- Action: √âv√©nements -->
      <mat-card class="action-card events-management-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar events-avatar">
            <mat-icon>event</mat-icon>
          </div>
          <mat-card-title>√âv√©nements</mat-card-title>
          <mat-card-subtitle>Cr√©er et g√©rer vos √©v√©nements</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            Cr√©ez de nouveaux √©v√©nements, g√©rez les r√©servations et suivez les statistiques.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="accent"
            (click)="navigateToEvents()">
            <mat-icon>add</mat-icon>
            G√©rer les √©v√©nements
          </button>
        </mat-card-actions>
      </mat-card>

    </div>
  </section>

  <!-- üîÑ √âtat de chargement -->
  @if (isLoadingStructure()) {
    <div class="loading-overlay">
      <mat-card class="loading-card">
        <mat-card-content>
          <div class="loading-content">
            <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
            <p>Chargement des informations de votre structure...</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  }

</div>
