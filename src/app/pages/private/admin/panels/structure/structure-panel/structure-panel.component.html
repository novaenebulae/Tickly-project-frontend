<div class="structure-panel-container">

  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-left">
        <div class="structure-avatar">
          @if (userStructureData?.logoUrl) {
            <img [src]="userStructureData!.logoUrl" [alt]="userStructureData!.name" class="structure-logo">
          } @else {
            <div class="structure-icon-placeholder">
              <mat-icon>business</mat-icon>
            </div>
          }
        </div>
        <div class="header-titles">
          <div class="structure-name-row">
            <h3 class="structure-name">{{ userStructureData?.name || 'Ma Structure' }}</h3>
            <mat-chip
              [color]="statusConfig().color"
              class="status-chip">
              <mat-icon matChipAvatar>{{ statusConfig().icon }}</mat-icon>
              {{ statusConfig().label }}
            </mat-chip>
          </div>
          <p class="structure-name">Panneau de configuration</p>
        </div>
      </div>
      <div class="header-actions">
        <button mat-icon-button (click)="refreshData()" matTooltip="Actualiser les données" class="refresh-btn">
          <mat-icon>refresh</mat-icon>
        </button>
        <button
          mat-stroked-button
          color="primary"
          (click)="openPublicPage()"
          matTooltip="Voir la page publique">
          <mat-icon>visibility</mat-icon>
          Page publique
        </button>
      </div>
    </div>
    <div class="header-description">
      <p>Gérez les informations de votre structure, configurez les espaces et invitez des membres à votre équipe.</p>
    </div>
  </div>

  <section class="actions-section">
    <div class="actions-grid">

      <mat-card class="action-card info-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar info-avatar">
            <mat-icon>edit</mat-icon>
          </div>
          <mat-card-title>Informations</mat-card-title>
          <mat-card-subtitle>Modifier les détails de votre structure</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            Mettez à jour le nom, l'adresse, les contacts et les informations générales de votre structure.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="primary"
            (click)="navigateToEdit()">
            <mat-icon>edit</mat-icon>
            Modifier
          </button>
        </mat-card-actions>
      </mat-card>

      <mat-card class="action-card team-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar team-avatar">
            <mat-icon>group</mat-icon>
          </div>
          <mat-card-title>Équipe</mat-card-title>
          <mat-card-subtitle>Gérer les membres et leurs rôles</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            Invitez de nouveaux membres, assignez des rôles et gérez les permissions d'accès.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="primary"
            (click)="navigateToTeam()">
            <mat-icon>settings</mat-icon>
            Gérer l'équipe
          </button>
        </mat-card-actions>
      </mat-card>

      <mat-card class="action-card areas-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar areas-avatar">
            <mat-icon>map</mat-icon>
          </div>
          <mat-card-title>Zones & Espaces</mat-card-title>
          <mat-card-subtitle>Configurer les espaces physiques</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            Définissez les différentes zones de votre structure : scènes, bars, gradins, etc.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="accent"
            (click)="navigateToAreas()">
            <mat-icon>settings</mat-icon>
            Configurer les zones
          </button>
        </mat-card-actions>
      </mat-card>

      <mat-card class="action-card events-management-card">
        <mat-card-header class="action-header">
          <div mat-card-avatar class="action-avatar events-avatar">
            <mat-icon>event</mat-icon>
          </div>
          <mat-card-title>Événements</mat-card-title>
          <mat-card-subtitle>Créer et gérer vos événements</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p class="action-description">
            Créez de nouveaux événements, gérez les réservations et suivez les statistiques.
          </p>
        </mat-card-content>
        <mat-card-actions>
          <button
            mat-flat-button
            color="accent"
            (click)="navigateToEvents()">
            <mat-icon>add</mat-icon>
            Gérer les événements
          </button>
        </mat-card-actions>
      </mat-card>

    </div>
  </section>

  @if (isLoadingStructure()) {
    <div class="loading-overlay">
      <mat-card class="loading-card">
        <mat-card-content>
          <div class="loading-content">
            <mat-progress-spinner mode="indeterminate" diameter="50"></mat-progress-spinner>
            <p>Chargement des informations de votre structure...</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  }

</div>
