<div class="register-container p-md-4">
  <div class="card creation-card">
    <div class="container-fluid">
      <div class="row">
        <!-- Section formulaire (gauche) -->
        <div class="col-md-8 form-section">
          <h3 class="form-title">Créer mon compte</h3>
          
          <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" class="register-form">
            <div class="row">
              <div class="col-md-6 form-group">
                <mat-form-field appearance="outline">
                  <mat-label>Prénom</mat-label>
                  <mat-icon matPrefix>person</mat-icon>
                  <input matInput formControlName="firstName" required>
                  <mat-error *ngIf="registerForm.get('firstName')?.hasError('required')">
                    Prénom requis
                  </mat-error>
                </mat-form-field>
              </div>
              
              <div class="col-md-6 form-group">
                <mat-form-field appearance="outline">
                  <mat-label>Nom</mat-label>
                  <mat-icon matPrefix>person_outline</mat-icon>
                  <input matInput formControlName="lastName" required>
                  <mat-error *ngIf="registerForm.get('lastName')?.hasError('required')">
                    Nom requis
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-12 form-group">
                <mat-form-field appearance="outline">
                  <mat-label>Email</mat-label>
                  <mat-icon matPrefix>email</mat-icon>
                  <input matInput formControlName="email" type="email" required>
                  <mat-error *ngIf="registerForm.get('email')?.hasError('required')">
                    Email requis
                  </mat-error>
                  <mat-error *ngIf="registerForm.get('email')?.hasError('email')">
                    Format d'email invalide
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-12 form-group">
                <mat-form-field appearance="outline">
                  <mat-label>Mot de passe</mat-label>
                  <mat-icon matPrefix>lock</mat-icon>
                  <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password" required>
                  <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                    <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                  </button>
                  <mat-error *ngIf="registerForm.get('password')?.hasError('required')">
                    Mot de passe requis
                  </mat-error>
                  <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">
                    Le mot de passe doit contenir au moins 8 caractères
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            
            <div class="row">
              <div class="col-md-12 form-group">
                <mat-form-field appearance="outline">
                  <mat-label>Confirmer le mot de passe</mat-label>
                  <mat-icon matPrefix>lock_outline</mat-icon>
                  <input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="confirmPassword" required>
                  <button mat-icon-button matSuffix (click)="hidePassword = !hidePassword" type="button">
                    <mat-icon>{{hidePassword ? 'visibility_off' : 'visibility'}}</mat-icon>
                  </button>
                  <mat-error *ngIf="registerForm.get('confirmPassword')?.hasError('required')">
                    Confirmation requise
                  </mat-error>
                  <mat-error *ngIf="registerForm.hasError('passwordMismatch') && !registerForm.get('confirmPassword')?.hasError('required')">
                    Les mots de passe ne correspondent pas
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            
            <div class="row mt-1 mb-1">
              <div class="col-md-12 form-group account-type-toggle">
                <div class="toggle-container">
                  <span [class.active]="!registerForm.get('createStructure')?.value">Compte spectateur</span>
                  <mat-slide-toggle formControlName="createStructure" color="primary"></mat-slide-toggle>
                  <span [class.active]="registerForm.get('createStructure')?.value">Compte structure</span>
                </div>
              </div>
            </div>
            
            <div class="action-buttons">
              <button mat-stroked-button class="back-btn" type="button" (click)="onCancel()">
                <mat-icon>arrow_back</mat-icon>
                Retour
              </button>
              <button mat-flat-button class="save-btn" type="submit" [disabled]="registerForm.invalid">
                Créer le compte
              </button>
            </div>
          </form>
        </div>
        
        <!-- Section d'information (droite) -->
        <div class="col-md-4 info-section order-first">
          <div class="content-wrapper">
            <div class="step-indicator">
              @if (registerForm.get('createStructure')?.value) {
                <span>Étape 1/2</span>
              } @else {
                <span>Étape 1/1</span>
              }
            </div>
     
            <div class="title-content">
              <h2>Rejoignez Tickly</h2>
              <p *ngIf="!registerForm.get('createStructure')?.value">
                Vous vous inscrivez en tant que spectateur.
                <br>
                Vous pourrez réserver des billets pour les événements disponibles sur la plateforme.
              </p>
              <p *ngIf="registerForm.get('createStructure')?.value">
                Vous vous inscrivez en tant qu'administrateur de structure.
                <br>
                Vous pourrez configurer votre structure après la création de votre compte.
              </p>
            </div>
            
            <div class="brand-logo">
              <img src="logo/tickly-logo.svg" alt="Logo de la plateforme">
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
